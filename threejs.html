<html> 
<head> 
<title></title> 
<style>
body { margin: 0px; padding: 0px; }
canvas { width: 100%; height: 100% }
</style> 
<script src="js/three.min.js"></script> 
<script src="js/OrbitControls.js"></script> 
<script src="js/Detector.js"></script>
<script src="js/libs/stats.min.js"></script>
<script>
var scene, camera, renderer, container;
var cube, sphere;
var controls;
var stats;

function init(){
	// scene
	scene = new THREE.Scene();

	// render
	var WIDTH = window.innerWidth, HEIGHT = window.innerHeight;
	container = document.getElementById('container');
	if ( Detector.webgl ){
		renderer = new THREE.WebGLRenderer( {antialias:true} );
	}else{
		renderer = new THREE.CanvasRenderer(); 
	}
	renderer.setSize(WIDTH, HEIGHT);
	container.appendChild(renderer.domElement);

	// camera
	camera = new THREE.PerspectiveCamera(120, WIDTH / HEIGHT, 0.1, 20000);
	camera.position.set(0,2,10);
	scene.add(camera);
	camera.lookAt(scene.position);

	// controls
	controls = new THREE.OrbitControls(camera, renderer.domElement);

	// light
	var ambientLight = new THREE.AmbientLight(0x222222);
	scene.add(ambientLight);
	var directionalLight = new THREE.DirectionalLight(0xffffff);
	directionalLight.position.set(1, 1, 1).normalize();
	scene.add(directionalLight);

	// floor
	var floorMaterial = new THREE.MeshBasicMaterial( { color: 0x444444, side: THREE.DoubleSide } );
	var floorGeometry = new THREE.PlaneGeometry(1000, 1000, 1, 1);
	var floor = new THREE.Mesh(floorGeometry, floorMaterial);
	floor.position.y = -1.1;
	floor.rotation.x = Math.PI / 2;
	scene.add(floor);

	// sky
	var skyBoxGeometry = new THREE.CubeGeometry( 10000, 10000, 10000 );
	var skyBoxMaterial = new THREE.MeshBasicMaterial( { color: 0xaaccff, side: THREE.BackSide } );
	var skyBox = new THREE.Mesh(skyBoxGeometry, skyBoxMaterial);
	scene.add(skyBox);

	// cube
	var geometry = new THREE.CubeGeometry(2,2,2); 
	var material = new THREE.MeshLambertMaterial({color: 0x000088, opacity: 0.5}); 
	cube = new THREE.Mesh(geometry, material); 
	scene.add(cube);

	// stats - fps
	stats = new Stats();
	stats.domElement.style.position = 'absolute';
	stats.domElement.style.top = '0px';
	container.appendChild(stats.domElement);

	// events
	renderer.domElement.addEventListener('mousemove', function(event){

	});
	renderer.domElement.addEventListener('mousedown', function(event){
		rotation();
	});
	renderer.domElement.addEventListener('mouseup', function(event){

	});
	document.addEventListener("keydown", function(event){
		console.log(event.keyCode);
		if(event.keyCode == '37'){ //esquerda
			cube.position.x -= 1;
		}else if(event.keyCode == '38'){ //cima
			cube.position.y += 1;
		}else if(event.keyCode == '39'){ //direita
			cube.position.x += 1;
		}else if(event.keyCode == '40'){ //baixo
			cube.position.y -= 1;
		}else if(event.keyCode == '33'){ //page up
			cube.rotation.y += .1;
		}else if(event.keyCode == '34'){ //page down
			cube.rotation.y -= .1;
		}

		if(cube.position.x < 0){ //equerda
			cube.material.color.setHex(0x00aa00);
		}else if(cube.position.x > 0){ //direita
			cube.material.color.setHex(0x0000aa);
		}else{
			//cube.material.color.setHex(0x000000);
		}
	}, false);

}

function animate() {
	requestAnimationFrame(animate);
	renderer.render(scene, camera);
	controls.update();
}

function rotation(){
	//sphere.rotation.x += .05;
	//sphere.rotation.y += .05;
//	sphere.position.x += .01;
	//sphere.position.y += .05;

	cube.rotation.y += .05;
//	cube.position.x += .01;

	renderer.render(scene, camera);
	requestAnimationFrame(rotation);
	stats.update();
}

window.onload = function(){
	init();
	animate();
}


//	var material = new THREE.LineBasicMaterial({color: 0xffffff, linewidth:2}); 
//	var geometry = new THREE.Geometry();
//	geometry.vertices.push( new THREE.Vector3( 0, 0, 0 ) ); 
//	geometry.vertices.push( new THREE.Vector3( 1, 0, 0 ) ); 
	//geometry.vertices.push( new THREE.Vector3( 1, 0, -1 ) );

//	var line = new THREE.Line( geometry, material );
//	line.position.z = -1;
//	scene.add(line); 


</script> 
</head> 
<body>
<div id="container"></div>
</body> 
</html>
